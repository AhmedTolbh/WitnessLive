<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WitnessLive</title>
    <script src="api-key-inject.js"></script>

<style>
  html, body {
    /* Prevent resizing and scrollbars in the popup window */
    overflow: hidden;
    height: 100vh;
    width: 100vw;
  }
  
  /* Tailwind utility classes used in this file */
  .bg-slate-900 {
    background-color: #0f172a;
  }
  
  .text-slate-200 {
    color: #e2e8f0;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in {
    animation: fadeIn 0.3s ease-out forwards;
  }

  @keyframes pulse {
    0% {
      transform: translate(-50%, -50%) scale(0.8);
      opacity: 0.7;
    }
    50% {
      transform: translate(-50%, -50%) scale(1.2);
      opacity: 1;
    }
    100% {
      transform: translate(-50%, -50%) scale(0.8);
      opacity: 0.7;
    }
  }

  .marker {
    position: absolute;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: rgba(192, 132, 252, 0.5); /* purple-400 with opacity */
    border: 2px solid white;
    box-shadow: 0 0 15px 5px rgba(192, 132, 252, 0.7);
    pointer-events: none; /* So it doesn't block clicks on the stream */
    z-index: 100;
    transform: translate(-50%, -50%); /* Center the marker on the coordinate */
    animation: pulse 1.5s ease-in-out infinite;
  }
</style>
  <script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.28.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/"
  }
}
</script>
  <script type="module" crossorigin src="/assets/app.js"></script>
</head>
  <body class="bg-slate-900 text-slate-200">
    <!-- API Key Setup Screen (shown on first launch) -->
    <div id="api-key-setup" style="display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: #0f172a; z-index: 10000; align-items: center; justify-content: center; flex-direction: column;">
      <div style="max-width: 500px; padding: 40px; background-color: #1e293b; border-radius: 12px; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);">
        <div style="text-align: center; margin-bottom: 30px;">
          <svg style="width: 64px; height: 64px; margin: 0 auto 20px; color: #9333ea;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path>
          </svg>
          <h1 style="font-size: 24px; font-weight: bold; color: #e2e8f0; margin-bottom: 10px;">Welcome to WitnessLive</h1>
          <p style="color: #94a3b8; font-size: 14px;">Enter your Gemini API key to get started</p>
        </div>
        
        <div style="margin-bottom: 20px;">
          <label for="setup-api-key" style="display: block; margin-bottom: 8px; font-size: 14px; font-weight: 500; color: #cbd5e1;">Gemini API Key</label>
          <input 
            type="text" 
            id="setup-api-key" 
            placeholder="Enter your API key here"
            style="width: 100%; padding: 12px; background-color: #0f172a; border: 1px solid #475569; border-radius: 8px; color: #e2e8f0; font-size: 14px; box-sizing: border-box;"
            onkeypress="if(event.key === 'Enter') saveApiKeyFromSetup()"
          />
          <p id="setup-error" style="display: none; color: #ef4444; font-size: 12px; margin-top: 8px;"></p>
        </div>
        
        <button 
          onclick="saveApiKeyFromSetup()" 
          style="width: 100%; padding: 12px; background-color: #9333ea; color: white; border: none; border-radius: 8px; font-weight: bold; font-size: 14px; cursor: pointer; transition: background-color 0.2s;"
          onmouseover="this.style.backgroundColor='#7e22ce'" 
          onmouseout="this.style.backgroundColor='#9333ea'"
        >
          Save and Continue
        </button>
        
        <div style="margin-top: 20px; padding: 12px; background-color: #0f172a; border-radius: 6px; font-size: 12px; color: #94a3b8; line-height: 1.5;">
          <strong style="color: #cbd5e1;">Don't have an API key?</strong><br>
          Get one for free at: <a href="https://aistudio.google.com/app/apikey" target="_blank" style="color: #9333ea; text-decoration: none;">aistudio.google.com/app/apikey</a>
        </div>
      </div>
    </div>
    
    <!-- Main Application (hidden until API key is configured) -->
    <div id="root"></div>
</body>
</html>
